# Ent Data Access Layer

This directory contains the data access layer generated by [entgo.io](https://entgo.io).

## Directory Structure & Guidelines

To maintain code integrity and ensure that manual changes are not lost during code generation, please follow these guidelines:

### üõ†Ô∏è Editable Area (Safe to Modify)
These files and directories are maintained by developers. `go generate` will NOT overwrite your logic here.

- **`schema/`**: Define your entity fields, edges (relationships), indexes, and hooks here. This is the **Single Source of Truth** for the database structure.
- **`generate.go`**: Contains the `go:generate` directive. You can modify this to change how Ent generates code.
- **`schema/hooks/`** (Optional): If you create a sub-package for complex business logic hooks.

### üö´ Auto-Generated Area (DO NOT EDIT)
These files are automatically generated by Ent. **Any manual changes will be overwritten** the next time `go generate ./internal/ent` is run.

- **Root files** (`client.go`, `exam.go`, `unit.go`, etc.): The actual ORM implementation and entity structs.
- **`migrate/`**: Database migration logic and physical schema mapping.
- **`predicate/`**: Query predicates for filtering data.
- **`mutation.go`**: Logic for tracking changes to entities.

## How to Update the Schema

1.  Modify or create files in the `schema/` directory.
2.  Run the following command from the project root:
    ```bash
    go generate ./internal/ent
    ```
3.  If any new dependencies are added (e.g., in tests), run:
    ```bash
    go mod tidy
    ```

## Best Practices
- **Always check for the `DO NOT EDIT` header** at the top of a file before making changes.
- Use **Hooks** in the `schema` files to implement data validation or side effects (like auto-assigning sequences) that must always run on creation or update.
